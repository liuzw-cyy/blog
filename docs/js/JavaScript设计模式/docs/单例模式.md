---
title: 单例模式
date: '2023-04-24'
authors: liuzw
url: 'https://github.com/liuzw-cyy'
tags:
  - 设计模式
slug: /pages/22cd59/
---

:::tip

单例模式的定义为：**保证一个类仅有一个实例，并提供一个访问它的全局访问点**。

单例模式的一个主要用途是避免重复的创建实例，节约不必要的开销，比如数据缓存、全局通用弹窗（如登录弹窗）和浏览器的Window对象等一些场景。

:::

在常见的登录弹窗场景中，无论点击多少次，我们要求页面只出现一个弹窗对象，此时可以用单例模式来实现这个需求。

```js
class LoginFrame {
  constructor(state) {
    this.state = state;
  }

  show() {
    if(this.state === 'show') {
      alert('登录框已显示')
      return
    }
    this.state === 'show'
    alert('登录框显示成功')
  }

  hide() {
    if(this.state === 'hide') {
      alert('登录框已隐藏')
      return
    }
    this.state === 'hide'
    alert('登录框隐藏成功')
  }

  // 通过静态方法获取静态属性instance上是否存在实例，如果没有创建一个并返回，反之直接返回已有的实例
  static getInstance(state) {
    if(!this.instance) {
      this.instance = new LoginFrame(state)
    }
    return this.instance
  }
}

// 验证
const p1 = LoginFrame.getInstance('show')
const p2 = LoginFrame.getInstance('hide')
console.log(p1 === p2) // true
```


